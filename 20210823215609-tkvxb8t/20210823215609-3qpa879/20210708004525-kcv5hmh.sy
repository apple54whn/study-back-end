{
	"ID": "20210708004525-kcv5hmh",
	"Type": "NodeDocument",
	"Properties": {
		"id": "20210708004525-kcv5hmh",
		"title": "202.持久化",
		"type": "doc"
	},
	"Children": [
		{
			"ID": "20210708004525-b66wouz",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-b66wouz"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "简介"
				}
			]
		},
		{
			"ID": "20210708004525-vrzfxa6",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-vrzfxa6"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "什么是持久化？"
				}
			]
		},
		{
			"ID": "20210708004525-wxgacwg",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-wxgacwg"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "利用"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "永久性"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "存储介质将数据进行保存，在特定的时间将保存的数据进行恢复的工作机制称为持久化。"
				}
			]
		},
		{
			"ID": "20210708004525-wa0a6tn",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-wa0a6tn"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "为什么要持久化？"
				}
			]
		},
		{
			"ID": "20210708004525-zpdz8h5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-zpdz8h5"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "防止"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "数据的意外"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "丢失"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，确保数据"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "安全性"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-8w9vajg",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-8w9vajg"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "持久化过程"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "保存什么"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-vn4q96h",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-vn4q96h"
			},
			"Children": [
				{
					"ID": "20210708004525-thk2olc",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-thk2olc"
					},
					"Children": [
						{
							"ID": "20210708004525-vw50uxg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-vw50uxg"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "将当前"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据状态"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "进行保存，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "快照"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "形式，存储数据结果，存储格式简单，关注点在"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。RDB"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-gvlnt44",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-gvlnt44"
					},
					"Children": [
						{
							"ID": "20210708004525-6sfs3nq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-6sfs3nq"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "将数据的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "操作过程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "进行保存，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "日志"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "形式，存储操作过程，存储格式复杂，关注点在数据的操作"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "过程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。AOF"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-r64hgvw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-r64hgvw"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "img"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/20200608142523.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-5u713ao",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-5u713ao"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "RDB—全量快照"
				}
			]
		},
		{
			"ID": "20210708004525-t38gyme",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-t38gyme"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 配置 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-vpxao3a",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-vpxao3a"
			},
			"Children": [
				{
					"ID": "20210708004525-7197kor",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-7197kor"
					},
					"Children": [
						{
							"ID": "20210708004525-3u5qppv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-3u5qppv"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "dbfilename dump.rdb"
								}
							]
						},
						{
							"ID": "20210708004525-dsjdf3n",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-dsjdf3n"
							},
							"Children": [
								{
									"ID": "20210708004525-qvtvlhf",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-qvtvlhf"
									},
									"Children": [
										{
											"ID": "20210708004525-h1ufu3z",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-h1ufu3z"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "说明：设置本地数据库"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "文件名"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "，默认值为 dump.rdb"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-zev8kb1",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-zev8kb1"
									},
									"Children": [
										{
											"ID": "20210708004525-bjz0zt5",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-bjz0zt5"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "经验：通常设置为"
												},
												{
													"Type": "NodeCodeSpan",
													"CodeMarkerLen": 1,
													"Children": [
														{
															"Type": "NodeCodeSpanOpenMarker",
															"Data": "`"
														},
														{
															"Type": "NodeCodeSpanContent",
															"Data": "dump-端口号.rdb"
														},
														{
															"Type": "NodeCodeSpanCloseMarker",
															"Data": "`"
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-x6ebb6n",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-x6ebb6n"
					},
					"Children": [
						{
							"ID": "20210708004525-w092cxb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-w092cxb"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "dir"
								}
							]
						},
						{
							"ID": "20210708004525-lb1xfl3",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-lb1xfl3"
							},
							"Children": [
								{
									"ID": "20210708004525-swy6lb6",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-swy6lb6"
									},
									"Children": [
										{
											"ID": "20210708004525-7v42ln5",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-7v42ln5"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "说明：设置存储.rdb 文件的"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "路径"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-97l6k1y",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-97l6k1y"
									},
									"Children": [
										{
											"ID": "20210708004525-xj1mffl",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-xj1mffl"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "经验：通常设置成存储空间较大的目录中，目录名称"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "data"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-y5s53b1",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-y5s53b1"
					},
					"Children": [
						{
							"ID": "20210708004525-3zyzxjx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-3zyzxjx"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "rdbcompression yes"
								}
							]
						},
						{
							"ID": "20210708004525-ej3sfxe",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-ej3sfxe"
							},
							"Children": [
								{
									"ID": "20210708004525-sfbiz1b",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-sfbiz1b"
									},
									"Children": [
										{
											"ID": "20210708004525-ehqyjwe",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-ehqyjwe"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "说明：设置存储至本地数据库时是否"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "压缩数据"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "，默认为 "
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "yes"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "，采用 LZF 压缩"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-4jjh5ak",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-4jjh5ak"
									},
									"Children": [
										{
											"ID": "20210708004525-ozdamsr",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-ozdamsr"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "经验：通常默认为开启状态，如果设置为 no，可以节省 CPU 运行时间，但会使存储的文件变大（巨大）"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-a7gyv32",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-a7gyv32"
					},
					"Children": [
						{
							"ID": "20210708004525-lw31ivf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-lw31ivf"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "rdbchecksum yes"
								}
							]
						},
						{
							"ID": "20210708004525-30vzh46",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-30vzh46"
							},
							"Children": [
								{
									"ID": "20210708004525-39six1u",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-39six1u"
									},
									"Children": [
										{
											"ID": "20210708004525-cp2t8zq",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-cp2t8zq"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "说明：设置是否"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "进行 RDB 文件格式校验"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "，该校验过程在"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "写文件和读文件过程均进行"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-h6697bx",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-h6697bx"
									},
									"Children": [
										{
											"ID": "20210708004525-56o3zv6",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-56o3zv6"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "经验：通常默认为开启状态，如果设置为 no，可以节约读写性过程约 10%"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "时间消耗"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "，但是存储一定的数据损坏风险"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-jkzr1d0",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-jkzr1d0"
					},
					"Children": [
						{
							"ID": "20210708004525-k0cqor6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-k0cqor6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "stop-writes-on-bgsave-error yes"
								}
							]
						},
						{
							"ID": "20210708004525-tgc9yqg",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-tgc9yqg"
							},
							"Children": [
								{
									"ID": "20210708004525-5wkf1sy",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-5wkf1sy"
									},
									"Children": [
										{
											"ID": "20210708004525-p3dulci",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-p3dulci"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "说明：[bgsave 相关]。后台存储过程中如果"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "出现错误"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "现象，是否"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "停止保存"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "操作"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-10gmvnt",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-10gmvnt"
									},
									"Children": [
										{
											"ID": "20210708004525-6hgprqg",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-6hgprqg"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "经验：通常默认为开启状态"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-uzet3p6",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-uzet3p6"
					},
					"Children": [
						{
							"ID": "20210708004525-m5bm4e6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-m5bm4e6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "save second changes"
								}
							]
						},
						{
							"ID": "20210708004525-9oezn68",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-9oezn68"
							},
							"Children": [
								{
									"ID": "20210708004525-ohf4j3s",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-ohf4j3s"
									},
									"Children": [
										{
											"ID": "20210708004525-9w2elgd",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-9w2elgd"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "作用：满足"
												},
												{
													"Type": "NodeStrong",
													"Children": [
														{
															"Type": "NodeStrongA6kOpenMarker",
															"Data": "**"
														},
														{
															"Type": "NodeText",
															"Data": "限定时间范围内 key 的变化数量达到指定数量"
														},
														{
															"Type": "NodeStrongA6kCloseMarker",
															"Data": "**"
														}
													]
												},
												{
													"Type": "NodeText",
													"Data": "即进行持久化"
												}
											]
										}
									]
								}
							]
						},
						{
							"ID": "20210708004525-5vraqni",
							"Type": "NodeList",
							"ListData": {
								"BulletChar": 42,
								"Padding": 2,
								"Marker": "Kg==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-5vraqni"
							},
							"Children": [
								{
									"ID": "20210708004525-ktvmkva",
									"Type": "NodeListItem",
									"Data": "*",
									"ListData": {
										"BulletChar": 42,
										"Padding": 2,
										"Marker": "Kg==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-ktvmkva"
									},
									"Children": [
										{
											"ID": "20210708004525-5sfj6v1",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-5sfj6v1"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "参数"
												}
											]
										},
										{
											"ID": "20210708004525-4makoc7",
											"Type": "NodeList",
											"ListData": {
												"Tight": true,
												"BulletChar": 45,
												"Padding": 2,
												"Marker": "LQ==",
												"Num": -1
											},
											"Properties": {
												"id": "20210708004525-4makoc7"
											},
											"Children": [
												{
													"ID": "20210708004525-fczvm91",
													"Type": "NodeListItem",
													"Data": "-",
													"ListData": {
														"Tight": true,
														"BulletChar": 45,
														"Padding": 2,
														"Marker": "LQ==",
														"Num": -1
													},
													"Properties": {
														"id": "20210708004525-fczvm91"
													},
													"Children": [
														{
															"ID": "20210708004525-iv4va9s",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20210708004525-iv4va9s"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "second：监控时间范围，秒！"
																}
															]
														}
													]
												},
												{
													"ID": "20210708004525-ptn6qoo",
													"Type": "NodeListItem",
													"Data": "-",
													"ListData": {
														"Tight": true,
														"BulletChar": 45,
														"Padding": 2,
														"Marker": "LQ==",
														"Num": -1
													},
													"Properties": {
														"id": "20210708004525-ptn6qoo"
													},
													"Children": [
														{
															"ID": "20210708004525-yt5fggm",
															"Type": "NodeParagraph",
															"Properties": {
																"id": "20210708004525-yt5fggm"
															},
															"Children": [
																{
																	"Type": "NodeText",
																	"Data": "changes：监控 key 的"
																},
																{
																	"Type": "NodeStrong",
																	"Children": [
																		{
																			"Type": "NodeStrongA6kOpenMarker",
																			"Data": "**"
																		},
																		{
																			"Type": "NodeText",
																			"Data": "变化"
																		},
																		{
																			"Type": "NodeStrongA6kCloseMarker",
																			"Data": "**"
																		}
																	]
																},
																{
																	"Type": "NodeText",
																	"Data": "量"
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-20ezipb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-20ezipb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "常见配置如下："
				}
			]
		},
		{
			"ID": "20210708004525-yxvk3ep",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-yxvk3ep"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "protected-mode no\n# bind 127.0.0.1\nport 6379\ndaemonize yes\nlogfile \"/usr/local/redis-6.2.1/logs/redis-6379.log\"\ndir ./data\ndbfilename dump-6379.rdb\nrdbcompression yes\nrdbchecksum yes\nstop-writes-on-bgsave-error yes\nsave 60 10000\nsave 300 100\nsave 3600 1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-1v9us9m",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-1v9us9m"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 启动方式—save 阻塞指令"
				}
			]
		},
		{
			"ID": "20210708004525-18qvetd",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-18qvetd"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "手动执行"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "一次保存操作"
				}
			]
		},
		{
			"ID": "20210708004525-zhwk0rw",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-zhwk0rw"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "save 工作原理 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-nmjgsdb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-nmjgsdb"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "img"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/20200608142541.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-0pyi9i9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-0pyi9i9"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "步骤："
				}
			]
		},
		{
			"ID": "20210708004525-2bx6x1j",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-2bx6x1j"
			},
			"Children": [
				{
					"ID": "20210708004525-31e28of",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-31e28of"
					},
					"Children": [
						{
							"ID": "20210708004525-9kccyh9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-9kccyh9"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "接收到 SAVE 命令的 Redis 服务器将遍历数据库包含的所有数据库，并将各个数据库包含的键值对全部记录到 RDB 文件中。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-al66ust",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-al66ust"
					},
					"Children": [
						{
							"ID": "20210708004525-9cnumxu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-9cnumxu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "在 SAVE 命令执行期间，Redis 服务器将阻塞，直到 RDB 文件创建完毕为止。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-a89iut1",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-a89iut1"
					},
					"Children": [
						{
							"ID": "20210708004525-2wakwlc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-2wakwlc"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果 Redis 服务器在执行 SAVE 命令时已经拥有了相应的 RDB 文件，那么服务器将使用"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "新创建的 RDB 文件代替已有的 RDB 文件"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-wm53dgc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-wm53dgc"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意："
				}
			]
		},
		{
			"ID": "20210708004525-so53gv2",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-so53gv2"
			},
			"Children": [
				{
					"ID": "20210708004525-l6r0tb0",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-l6r0tb0"
					},
					"Children": [
						{
							"ID": "20210708004525-bhxqhj2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-bhxqhj2"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "save 指令"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的执行会"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "阻塞"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "当前 Redis 服务器，直到当前 RDB 过程完成为止，有可能会造成"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "长时间阻塞"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，线上"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "不建议使用"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-tizzqu7",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-tizzqu7"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "数据量大、单线程阻塞问题？"
				}
			]
		},
		{
			"ID": "20210708004525-n4jbwsl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-n4jbwsl"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "那么"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "数据量过大，单线程执行方式造成效率过低如何处理"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "?"
				}
			]
		},
		{
			"ID": "20210708004525-61wfreq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-61wfreq"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以采用"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "后台执行"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "（见 bgsave）："
				}
			]
		},
		{
			"ID": "20210708004525-zqa18xf",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-zqa18xf"
			},
			"Children": [
				{
					"ID": "20210708004525-erdbo4y",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-erdbo4y"
					},
					"Children": [
						{
							"ID": "20210708004525-v2kd7kd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-v2kd7kd"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "谁：Redis 操作者"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "（用户）发起指令"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "；Redis "
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "服务器控制指令执行"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-qw8jslv",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-qw8jslv"
					},
					"Children": [
						{
							"ID": "20210708004525-j5opsgj",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-j5opsgj"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "什么时间："
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "即时（发起）"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "；"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "合理的时间（执行）"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-zuso476",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-zuso476"
					},
					"Children": [
						{
							"ID": "20210708004525-4tuhcc4",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-4tuhcc4"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "干什么事情：保存数据"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-18lfb05",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-18lfb05"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 启动方式—bgsave 异步指令 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-2xt8que",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-2xt8que"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "手动启动后台保存"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "操作，但不是立即执行。它不会直接使用"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "Redis 服务器进程"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "创建 RDB 文件，而是使用"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "子进程"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "创建 RDB 文件"
				}
			]
		},
		{
			"ID": "20210708004525-5rc3k0j",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-5rc3k0j"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "bgsave 工作原理 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-kfsfywr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-kfsfywr"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210322224952967"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210322224952967.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-g160vu0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-g160vu0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "步骤："
				}
			]
		},
		{
			"ID": "20210708004525-0k29lqd",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-0k29lqd"
			},
			"Children": [
				{
					"ID": "20210708004525-3syu3u1",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-3syu3u1"
					},
					"Children": [
						{
							"ID": "20210708004525-40y8zio",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-40y8zio"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "创建一个子进程。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-aou5qg1",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-aou5qg1"
					},
					"Children": [
						{
							"ID": "20210708004525-dixeb5t",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-dixeb5t"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "子进程执行 SAVE 命令，创建新的 RDB 文件。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-3dug37z",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-3dug37z"
					},
					"Children": [
						{
							"ID": "20210708004525-cdkjquy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-cdkjquy"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RDB 文件创建完毕之后，子进程退出并通知 Redis 服务器进程（父进程）新 RDB 文件已经完成。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-vq47sbv",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-vq47sbv"
					},
					"Children": [
						{
							"ID": "20210708004525-zgr5w5p",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-zgr5w5p"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "Redis 服务器进程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "使用新 RDB 文件替换已有的 RDB 文件。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-17h3f17",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-17h3f17"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意："
				}
			]
		},
		{
			"ID": "20210708004525-je4te1u",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-je4te1u"
			},
			"Children": [
				{
					"ID": "20210708004525-hlck9ax",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-hlck9ax"
					},
					"Children": [
						{
							"ID": "20210708004525-fc9wroa",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-fc9wroa"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "bgsave 命令是针对 save 阻塞问题做的优化。Redis 内部所有涉及到 RDB 操作都采用 bgsave 的方式，save 命令可以放弃。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-uw6lnzu",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-uw6lnzu"
					},
					"Children": [
						{
							"ID": "20210708004525-qh5axy2",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-qh5axy2"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "虽然 BGSAVE 命令不会像 SAVE 命令那样一直阻塞 Redis 服务器，但由于执行 BGSAVE 命令需要创建子进程，所以"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "父进程占用的内存数量越大，创建子进程这一操作耗费的时间也会越长"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，因此 Redis 服务器在执行 BGSAVE 命令时，仍然可能会由于创建子进程而被"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "短暂地阻塞"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-ss0w3ah",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-ss0w3ah"
					},
					"Children": [
						{
							"ID": "20210708004525-xde571x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-xde571x"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "bgsave 的保存操作可以通过 redis 的日志查看"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。并且执行时就已经返回 background..."
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-sahaq2a",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-sahaq2a"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "何时执行保存指令问题？"
				}
			]
		},
		{
			"ID": "20210708004525-4qsnx0u",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-4qsnx0u"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "反复执行保存指令，忘记了怎么办"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "？不知道数据产生了多少变化，"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "何时保存"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "？"
				}
			]
		},
		{
			"ID": "20210708004525-wd33zfb",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-wd33zfb"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "自动执行"
				}
			]
		},
		{
			"ID": "20210708004525-21dd7h9",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-21dd7h9"
			},
			"Children": [
				{
					"ID": "20210708004525-0qh4oi5",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-0qh4oi5"
					},
					"Children": [
						{
							"ID": "20210708004525-urutgyv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-urutgyv"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "谁：Redis"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "服务器发起指令（基于条件）"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-r9qn2hd",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-r9qn2hd"
					},
					"Children": [
						{
							"ID": "20210708004525-4vt3ji1",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-4vt3ji1"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "什么时间："
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "满足条件"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-e7byowx",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-e7byowx"
					},
					"Children": [
						{
							"ID": "20210708004525-z9bptsl",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-z9bptsl"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "干什么事情：保存数据"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-6348t7b",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-6348t7b"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 启动方式—save 配置 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-yuv4rmj",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-yuv4rmj"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "简介"
				}
			]
		},
		{
			"ID": "20210708004525-vourmkl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-vourmkl"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "save second changes\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-fdsrn20",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-fdsrn20"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "作用：满足"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "限定时间范围内 key 的变化数量达到指定数量"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "即进行持久化"
				}
			]
		},
		{
			"ID": "20210708004525-e5fsb3d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-e5fsb3d"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "参数"
				}
			]
		},
		{
			"ID": "20210708004525-gt5ws0a",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-gt5ws0a"
			},
			"Children": [
				{
					"ID": "20210708004525-et2xwsv",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-et2xwsv"
					},
					"Children": [
						{
							"ID": "20210708004525-sd7kabs",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-sd7kabs"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "second：监控时间范围，秒！"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-sxaspgk",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-sxaspgk"
					},
					"Children": [
						{
							"ID": "20210708004525-zs4rpuf",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-zs4rpuf"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "changes：监控 key 的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "变化"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "量"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-795tnxv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-795tnxv"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "位置：在 conf 文件中进行配置"
				}
			]
		},
		{
			"ID": "20210708004525-lxcnoko",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-lxcnoko"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "RDB 持久化是 Redis 默认使用的持久化方式，如果用户在启动 Redis 服务器时，既"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "没有显式地关闭 RDB 持久化功能"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，也"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "没有启用 AOF 持久化功能"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，那么 Redis"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "默认将使用以下 save 选项进行 RDB 持久化"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-o9zmxrp",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-o9zmxrp"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "save 60 10000\nsave 300 100\nsave 3600 1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-t2cpspx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-t2cpspx"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意："
				}
			]
		},
		{
			"ID": "20210708004525-gpigdpr",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-gpigdpr"
			},
			"Children": [
				{
					"ID": "20210708004525-8f5l6r1",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-8f5l6r1"
					},
					"Children": [
						{
							"ID": "20210708004525-ch31mw8",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ch31mw8"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Redis 允许用户同时向服务器提供"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "多个 save 选项"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，当给定选项中的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "任意一个条件被满足时"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，服务器就会"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "执行一次 BGSAVE"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-du2i3ra",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-du2i3ra"
					},
					"Children": [
						{
							"ID": "20210708004525-t8p5cm9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-t8p5cm9"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "为了避免由于同时使用多个触发条件而导致服务器过于频繁地执行 BGSAVE 命令，Redis 服务器在"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "每次成功创建 RDB 文件之后"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "负责自动触发 BGSAVE 命令的时间计数器以及修改次数计数器都会被清零并重新开始计数"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：无论这个 RDB 文件是由自动触发的 BGSAVE 命令创建的，还是由用户执行的 SAVE 命令或 BGSAVE 命令创建的，都是如此"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-7m2ispk",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-7m2ispk"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "save 配置原理 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-f9pwdvn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-f9pwdvn"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210322231343462"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210322231343462.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-rcqo4ox",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-rcqo4ox"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意："
				}
			]
		},
		{
			"ID": "20210708004525-mie2gvo",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-mie2gvo"
			},
			"Children": [
				{
					"ID": "20210708004525-yb8x31w",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-yb8x31w"
					},
					"Children": [
						{
							"ID": "20210708004525-aih3wma",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-aih3wma"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "save 配置要"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "根据实际业务情况进行设置"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，频度过高或过低都会出现性能问题，结果可能是"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "灾难性"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-8athepe",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-8athepe"
					},
					"Children": [
						{
							"ID": "20210708004525-koui0ns",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-koui0ns"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "save 配置中对于 second 与 changes 设置通常具有"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "互补对应关系"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "（一大一小），尽量不要设置成包含性关系"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-8h6tvhx",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-8h6tvhx"
					},
					"Children": [
						{
							"ID": "20210708004525-74bcp7l",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-74bcp7l"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "save 配置启动后执行的是"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "bgsave"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "操作"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-usu3xdn",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-usu3xdn"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 三种启动方式对比 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-bdkubsd",
			"Type": "NodeTable",
			"Data": "| 方式           | save 指令 | bgsave 指令 |\n| -------------- | --------- | ----------- |\n| 读写           | 同步      | 异步        |\n| 阻塞客户端指令 | 是        | 否          |\n| 额外内存消耗   | 否        | 是          |\n| 启动新进程     | 否        | 是          |",
			"TableAligns": [
				0,
				0,
				0
			],
			"Properties": {
				"id": "20210708004525-bdkubsd"
			},
			"Children": [
				{
					"Type": "NodeTableHead",
					"Children": [
						{
							"Type": "NodeTableRow",
							"Children": [
								{
									"Type": "NodeTableCell",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "方式"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "save 指令"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "bgsave 指令"
										}
									]
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "读写"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "同步"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "异步"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "阻塞客户端指令"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "是"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "否"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "额外内存消耗"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "否"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "是"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "启动新进程"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "否"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "是"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-2nl3z92",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-2nl3z92"
			},
			"Children": [
				{
					"ID": "20210708004525-npj5w4p",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-npj5w4p"
					},
					"Children": [
						{
							"ID": "20210708004525-6vp7vel",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-6vp7vel"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "SAVE 命令在创建 RDB 文件期间会"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "阻塞"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "Redis 服务器，所以如果我们需要在创建 RDB 文件的同时让 Redis 服务器继续为其他客户端服务，那么就只能使用 BGSAVE 命令来创建 RDB 文件"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-3aqfsr7",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-3aqfsr7"
					},
					"Children": [
						{
							"ID": "20210708004525-flg71zu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-flg71zu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "SAVE 命令"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "无须创建子进程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，它"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "不会因为创建子进程而消耗额外的内存"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，所以在"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "维护离线的 Redis 服务器"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "时，使用 SAVE 命令能够比使用 BGSAVE 命令"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "更快地完成创建 RDB 文件"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的工作"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-4o9mwst",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-4o9mwst"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 特殊启动方式 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-dltuzak",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-dltuzak"
			},
			"Children": [
				{
					"ID": "20210708004525-ha1nwf6",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-ha1nwf6"
					},
					"Children": [
						{
							"ID": "20210708004525-gigror6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-gigror6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "全量复制：在"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "主从复制"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "中详细讲解"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-sghnwbu",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-sghnwbu"
					},
					"Children": [
						{
							"ID": "20210708004525-ig4gdaz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ig4gdaz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务器"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "运行过程中重启"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						},
						{
							"ID": "20210708004525-sn473c3",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"CodeBlockFenceChar": 96,
							"CodeBlockFenceLen": 3,
							"CodeBlockOpenFence": "YGBg",
							"CodeBlockCloseFence": "YGBg",
							"Properties": {
								"id": "20210708004525-sn473c3"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "debug reload\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-5h5oup8",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-5h5oup8"
					},
					"Children": [
						{
							"ID": "20210708004525-v7vrmmx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-v7vrmmx"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "关闭服务器时指定保存数据"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						},
						{
							"ID": "20210708004525-6pg43wn",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"CodeBlockFenceChar": 96,
							"CodeBlockFenceLen": 3,
							"CodeBlockOpenFence": "YGBg",
							"CodeBlockCloseFence": "YGBg",
							"Properties": {
								"id": "20210708004525-6pg43wn"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "shutdown save\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								}
							]
						},
						{
							"ID": "20210708004525-0dv57si",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-0dv57si"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "默认"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "情况下执行 shutdown 命令时，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "自动执行 save（如果没有开启 AOF 持久化功能）"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-8wv9du4",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-8wv9du4"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 优缺点 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-c44ysy9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-c44ysy9"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "优点："
				}
			]
		},
		{
			"ID": "20210708004525-90mzixn",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-90mzixn"
			},
			"Children": [
				{
					"ID": "20210708004525-zbpv00d",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-zbpv00d"
					},
					"Children": [
						{
							"ID": "20210708004525-8tmvw3n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-8tmvw3n"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RDB 是一个"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "紧凑压缩"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的二进制文件，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "存储效率较高"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-islftos",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-islftos"
					},
					"Children": [
						{
							"ID": "20210708004525-o3kl12a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-o3kl12a"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RDB 内部存储的是 Redis 在某个时间点的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据快照"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，非常适合用于"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据备份"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "全量复制"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "等场景"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-3f1n168",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-3f1n168"
					},
					"Children": [
						{
							"ID": "20210708004525-kk8pygb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-kk8pygb"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "RDB 恢复数据的速度要比 AOF 快很多"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-4hxfu0o",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-4hxfu0o"
					},
					"Children": [
						{
							"ID": "20210708004525-cy8ak86",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-cy8ak86"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "应用：服务器中每 X 小时执行 bgsave 备份，并将 RDB 文件拷贝到远程机器中，用于"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "灾难恢复"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-9y8qmqk",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-9y8qmqk"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "缺点："
				}
			]
		},
		{
			"ID": "20210708004525-ab2fnvj",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-ab2fnvj"
			},
			"Children": [
				{
					"ID": "20210708004525-tz3oba5",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-tz3oba5"
					},
					"Children": [
						{
							"ID": "20210708004525-liuctpy",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-liuctpy"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RDB 方式无论是执行指令还是利用配置，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "无法做到实时持久化"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，具有较大的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "可能性丢失数据"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-vfztn2v",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-vfztn2v"
					},
					"Children": [
						{
							"ID": "20210708004525-uoho6jd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-uoho6jd"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "bgsave 指令每次运行要执行"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "fork 操作创建子进程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，要"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "牺牲掉一些性能"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。甚至数据量大的时候还会"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "短暂阻塞"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-xoqqope",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-xoqqope"
					},
					"Children": [
						{
							"ID": "20210708004525-zcmq1mt",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-zcmq1mt"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "存储数据量大时，效率低"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。因为是\"全量\"数据"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-e6cwirk",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-e6cwirk"
					},
					"Children": [
						{
							"ID": "20210708004525-4ups73j",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-4ups73j"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Redis 的众多版本中"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "未进行 RDB 文件格式的版本统一"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，有可能出现各版本服务之间数据格式无法"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "兼容"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "现象"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-87jkqx1",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-87jkqx1"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "场景 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-yfiqzhl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-yfiqzhl"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "所以 RDB 更像是一种数据备份手段而非一种普通的数据持久化手段"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-xbsx7xe",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-xbsx7xe"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "AOF—增量 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-jm6735h",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-jm6735h"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 缺点如何解决"
				}
			]
		},
		{
			"ID": "20210708004525-ez7p2wr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-ez7p2wr"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "缺点："
				}
			]
		},
		{
			"ID": "20210708004525-n92tcev",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-n92tcev"
			},
			"Children": [
				{
					"ID": "20210708004525-t4c6fqh",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-t4c6fqh"
					},
					"Children": [
						{
							"ID": "20210708004525-ncpaabd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ncpaabd"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "存储数据量较大，效率较低。基于"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "快照"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "思想，每次读写都是全部数据，当数据量巨大时，效率非常低"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-ukk9qif",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-ukk9qif"
					},
					"Children": [
						{
							"ID": "20210708004525-bj92wdh",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-bj92wdh"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "所以大数据量下的 IO 性能较低"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-fn7hgoy",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-fn7hgoy"
					},
					"Children": [
						{
							"ID": "20210708004525-mldqw5k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-mldqw5k"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "基于 fork 创建子进程，内存产生额外消耗"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-ez67fwy",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-ez67fwy"
					},
					"Children": [
						{
							"ID": "20210708004525-qy1r9ew",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-qy1r9ew"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "宕机带来的数据丢失风险"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-z7eotzl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-z7eotzl"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "解决思路："
				}
			]
		},
		{
			"ID": "20210708004525-9pwhrjz",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-9pwhrjz"
			},
			"Children": [
				{
					"ID": "20210708004525-zyyngm4",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-zyyngm4"
					},
					"Children": [
						{
							"ID": "20210708004525-ta8wmci",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ta8wmci"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "不写全数据，仅记录"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "部分数据"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-nbcvvhz",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-nbcvvhz"
					},
					"Children": [
						{
							"ID": "20210708004525-a08q2zv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-a08q2zv"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "降低区分数据"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "是否改变"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的难度，改记录数据为"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "记录操作过程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-5vawg4q",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-5vawg4q"
					},
					"Children": [
						{
							"ID": "20210708004525-2wh4u2o",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-2wh4u2o"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "对"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "所有操作均进行记录"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "排除丢失数据"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的风险"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-wj3pojl",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-wj3pojl"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 简介"
				}
			]
		},
		{
			"ID": "20210708004525-r27p5mk",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-r27p5mk"
			},
			"Children": [
				{
					"ID": "20210708004525-bkrwsmf",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-bkrwsmf"
					},
					"Children": [
						{
							"ID": "20210708004525-q6iecsx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-q6iecsx"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "AOF（append only file）持久化"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "：以"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "独立日志"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的方式记录每次"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "写命令"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "重启时再重新执行 AOF 文件中命令"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "达到恢复数据的目的。与 RDB 相比可以简单描述为改记录数据为"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "记录数据产生的过程"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-iutqx2v",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-iutqx2v"
					},
					"Children": [
						{
							"ID": "20210708004525-3nq603b",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-3nq603b"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "AOF 的主要作用是"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "解决了数据持久化的实时性"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，目前已经是 Redis 持久化的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "主流方式"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-vv3k9l6",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-vv3k9l6"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 配置启动—appendonly 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-z34t5xx",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-z34t5xx"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "appendonly yes|no\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-u76040p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-u76040p"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "作用：是否开启 AOF 持久化功能，"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "默认为不开启状态"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-1mvn6mu",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-1mvn6mu"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "appendfsync always|everysec|no\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-051gh6l",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-051gh6l"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "作用：AOF"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "写数据（刷盘）策略"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-9aignzq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-9aignzq"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "appendfilename filename\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-rnr6bh5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-rnr6bh5"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "作用：AOF"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "持久化文件名"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，默认文件名未 appendonly.aof，建议配置为"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "appendonly-端口号.aof"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-67x481i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-67x481i"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "dir\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-zx95qnu",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-zx95qnu"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "作用：AOF 持久化文件保存路径，与 RDB 持久化文件保持一致即可"
				}
			]
		},
		{
			"ID": "20210708004525-3kq6j36",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-3kq6j36"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "常见配置如下："
				}
			]
		},
		{
			"ID": "20210708004525-7g4axkb",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-7g4axkb"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "protected-mode no\n# bind 127.0.0.1\nport 6379\ndaemonize yes\nlogfile \"/usr/local/redis-6.2.1/logs/redis-6379.log\"\ndir ./data\ndbfilename dump-6379.rdb\nrdbcompression yes\nrdbchecksum yes\nstop-writes-on-bgsave-error yes\nsave 60 2\nappendonly yes\nappendfsync everysec\nappendfilename appendonly-6379.aof\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-k3opt6u",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-k3opt6u"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 写数据过程 \u0026 三种策略 appendfsync 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-pg5x1fs",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-pg5x1fs"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210322233538723"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210322233538723.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-zy4302n",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-zy4302n"
			},
			"Children": [
				{
					"ID": "20210708004525-d0tl9o7",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-d0tl9o7"
					},
					"Children": [
						{
							"ID": "20210708004525-rsvx6d3",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-rsvx6d3"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "always"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "（每次）：每次写入操作均同步到 AOF 文件中，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据零误差，性能较低"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-ykhch6u",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-ykhch6u"
					},
					"Children": [
						{
							"ID": "20210708004525-k4rlp3a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-k4rlp3a"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "everysec🔥"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "（每秒）："
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "默认"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。每秒将"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "缓冲区"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "中的指令同步到 AOF 文件中，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据准确性较高，性能较高"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。在系统突然宕机的情况下"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "丢失 1 秒内"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的数据"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-eub1eic",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-eub1eic"
					},
					"Children": [
						{
							"ID": "20210708004525-51r09pg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-51r09pg"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "no"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "（系统控制）：由"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "操作系统控制"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "每次同步到 AOF 文件的周期，整体过程"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "不可控"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-u74t7df",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-u74t7df"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 重写 \u0026 重写规则 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-y5ce9rt",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-y5ce9rt"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 重写"
				}
			]
		},
		{
			"ID": "20210708004525-5p9az0c",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-5p9az0c"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果连续执行如下指令该如何处理"
				}
			]
		},
		{
			"ID": "20210708004525-il3i821",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-il3i821"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210322235031635"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210322235031635.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-kqfioj0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-kqfioj0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "随着命令不断写入 AOF，"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "文件会越来越大"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，为了解决这个问题，Redis 引入了 AOF 重写机制压缩文件体积。AOF 文件重写是"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "将 Redis 进程内的数据转化为写命令同步到新 AOF 文件的过程"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。简单说就是"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "将对同一个数据的若干个条命令执行结果转化成最终结果数据对应的指令进行记录"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "。"
				}
			]
		},
		{
			"ID": "20210708004525-h95oj2i",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-h95oj2i"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "AOF 重写作用："
				}
			]
		},
		{
			"ID": "20210708004525-13z0apd",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-13z0apd"
			},
			"Children": [
				{
					"ID": "20210708004525-e0f6g28",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-e0f6g28"
					},
					"Children": [
						{
							"ID": "20210708004525-kipil2a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-kipil2a"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "降低磁盘占用量，提高磁盘利用率"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-9ax2xz9",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-9ax2xz9"
					},
					"Children": [
						{
							"ID": "20210708004525-ibkjdce",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ibkjdce"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "提高持久化效率，降低持久化写时间，提高 IO 性能"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-gu9qz8g",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-gu9qz8g"
					},
					"Children": [
						{
							"ID": "20210708004525-1n6rt1v",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-1n6rt1v"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "降低数据恢复用时，提高数据恢复效率"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-6gon1rg",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-6gon1rg"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 重写规则"
				}
			]
		},
		{
			"ID": "20210708004525-y46uih7",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-y46uih7"
			},
			"Children": [
				{
					"ID": "20210708004525-bgyuevs",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-bgyuevs"
					},
					"Children": [
						{
							"ID": "20210708004525-8sv24tb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-8sv24tb"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "进程内"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "已超时的数据不再写入"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "文件"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-0psy5ja",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-0psy5ja"
					},
					"Children": [
						{
							"ID": "20210708004525-50ilpzu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-50ilpzu"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "忽略无效指令"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，重写时使用进程内数据直接生成，这样新的 AOF 文件只保留最终数据的写入命令"
								}
							]
						},
						{
							"ID": "20210708004525-slfxf5e",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-slfxf5e"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如 del key1、 hdel key2、srem key3、set key4 111、set key4 222 等"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-303rgre",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-303rgre"
					},
					"Children": [
						{
							"ID": "20210708004525-2wcsjfp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-2wcsjfp"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "对同一数据的多条写命令合并为一条命令"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeSoftBreak",
									"Data": "\n"
								},
								{
									"Type": "NodeText",
									"Data": "如 lpush list1 a、lpush list1 b、 lpush list1 c 可以转化为:lpush list1 a b c。 为防止数据量过大造成客户端缓冲区溢出，对 list、set、hash、zset 等类型，每条指令最多写入 64 个元素"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-ks1cgya",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-ks1cgya"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 重写方式—bgrewriteaof 指令 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-hs0gtfh",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-hs0gtfh"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "bgrewriteaof 异步指令"
				}
			]
		},
		{
			"ID": "20210708004525-os25zp1",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-os25zp1"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "手动重写，创建"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "子进程"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-m5rby32",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-m5rby32"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "bgrewriteaof\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-m0dsf56",
			"Type": "NodeHeading",
			"HeadingLevel": 4,
			"Properties": {
				"id": "20210708004525-m0dsf56"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "#### "
				},
				{
					"Type": "NodeText",
					"Data": "bgrewriteaof 工作原理"
				}
			]
		},
		{
			"ID": "20210708004525-nvd7v40",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-nvd7v40"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210322235807544"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210322235807544.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-jppdqb0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-jppdqb0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意："
				}
			]
		},
		{
			"ID": "20210708004525-jcu73a8",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-jcu73a8"
			},
			"Children": [
				{
					"ID": "20210708004525-0jfmwy1",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-0jfmwy1"
					},
					"Children": [
						{
							"ID": "20210708004525-wp1dw18",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-wp1dw18"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果用户发送 BGREWRITEAOF 命令请求时，服务器正在创建 RDB 文件，那么服务器将把 AOF 重写操作延后到 RDB 文件创建完毕之后再执行，从而避免两个写硬盘操作同时执行导致机器性能下降"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-o5xno2h",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-o5xno2h"
					},
					"Children": [
						{
							"ID": "20210708004525-lfi7jne",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-lfi7jne"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果服务器在执行重写操作的过程中，又接收到了新的 BGREWRITEAOF 命令请求，那么服务器将返回以下错误："
								}
							]
						},
						{
							"ID": "20210708004525-ap2e0yz",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"CodeBlockFenceChar": 96,
							"CodeBlockFenceLen": 3,
							"CodeBlockOpenFence": "YGBg",
							"CodeBlockCloseFence": "YGBg",
							"Properties": {
								"id": "20210708004525-ap2e0yz"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "redis\u003e BGREWRITEAOF\n(error) ERR Background append only file rewriting already in progress\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-ljnfvwr",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-ljnfvwr"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 重写方式—配置 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-n0sa3nw",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-n0sa3nw"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "自动重写触发条件设置"
				}
			]
		},
		{
			"ID": "20210708004525-d5outcc",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-d5outcc"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "auto-aof-rewrite-min-size size\nauto-aof-rewrite-percentage percentage\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-fqb4q66",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-fqb4q66"
			},
			"Children": [
				{
					"ID": "20210708004525-14jyqdq",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-14jyqdq"
					},
					"Children": [
						{
							"ID": "20210708004525-35g79ae",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-35g79ae"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"CodeMarkerLen": 1,
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker",
											"Data": "`"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "auto-aof-rewrite-min-size"
										},
										{
											"Type": "NodeCodeSpanCloseMarker",
											"Data": "`"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "选项用于设置"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "触发自动 AOF 文件重写所需的最小 AOF 文件体积"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，当 AOF 文件的体积小于给定值时，服务器将不会自动执行 BGREWRITEAOF 命令。在"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "默认"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "情况下，该选项的值为 "
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "64mb"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-e9y2ebn",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-e9y2ebn"
					},
					"Children": [
						{
							"ID": "20210708004525-ddy7a9i",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ddy7a9i"
							},
							"Children": [
								{
									"Type": "NodeCodeSpan",
									"CodeMarkerLen": 1,
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker",
											"Data": "`"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "auto-aof-rewrite-percentage"
										},
										{
											"Type": "NodeCodeSpanCloseMarker",
											"Data": "`"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "控制的是触发自动 AOF 文件重写所需的文件体积"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "增大比例"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。默认值"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "100"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						},
						{
							"ID": "20210708004525-uqr5zp7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-uqr5zp7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "默认值表示如果当前 AOF 文件的体积比最后一次 AOF 文件重写之后的体积增大了一倍（100%），那么将自动执行一次 BGREWRITEAOF 命令"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-ztefv1p",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-ztefv1p"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "自动重写触发比对参数（执行 "
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "info"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "指令，查看 Persistence 获取具体信息）"
				}
			]
		},
		{
			"ID": "20210708004525-1wxwnej",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-1wxwnej"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "aof_current_size # 这个值会不断变化\naof_base_size # 这个值会在rewrite后变化\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-d3pjjk7",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-d3pjjk7"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "自动重写触发条件"
				}
			]
		},
		{
			"ID": "20210708004525-lgp3e2x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-lgp3e2x"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210323000007405"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210323000007405.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-61b0k7q",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-61b0k7q"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 工作流程 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-ob2x7c6",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-ob2x7c6"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210323000635512"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210323000635512.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-aa022pt",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-aa022pt"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "AOF 重写流程 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-ybckse5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-ybckse5"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210323000657592"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210323000657592.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-8dub8cc",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-8dub8cc"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210323000804799"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210323000804799.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-y545615",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-y545615"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "RDB-AOF 混合持久化—4.0 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-wpv2ghn",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-wpv2ghn"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "RDB 与 AOF 对比："
				}
			]
		},
		{
			"ID": "20210708004525-00sh0qe",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-00sh0qe"
			},
			"Children": [
				{
					"ID": "20210708004525-8z7thpc",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-8z7thpc"
					},
					"Children": [
						{
							"ID": "20210708004525-cn2kuuz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-cn2kuuz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "RDB 持久化可以生成紧凑的 RDB 文件，并且使用 RDB 文件进行数据恢复的速度也非常快，但是 RDB 的全量持久化模式可能会让服务器在停机时丢失大量数据。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-cru6fs6",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-cru6fs6"
					},
					"Children": [
						{
							"ID": "20210708004525-3ekehds",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-3ekehds"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "与 RDB 持久化相比，AOF 持久化可以将丢失数据的时间窗口限制在 1s 之内，但是协议文本格式的 AOF 文件的体积将比 RDB 文件要大得多，并且数据恢复过程也会相对较慢。相比 RDB 优先级高！"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-8iihc6d",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-8iihc6d"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "Redis 从"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "4.0 版本"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "开始引入 RDB-AOF 混合持久化模式，这种模式是基于 AOF 持久化模式构建而来的——如果用户"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "打开了服务器的 AOF 持久化功能"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，并且将"
				}
			]
		},
		{
			"ID": "20210708004525-zxwzllh",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-zxwzllh"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "aof-use-rdb-preamble \u003cvalue\u003e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-u34n7vl",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-u34n7vl"
			},
			"Children": [
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "选项的值设置成了 yes（默认为 no）"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，那么 Redis 服务器在执行"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "AOF 重写"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "操作时，就会像执行 BGSAVE 命令那样，根据数据库当前的状态"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "生成出相应的 RDB 数据"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，并将这些数据"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "写入新建的 AOF 文件"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "中，至于那些"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "在 AOF 重写开始之后执行的 Redis 命令"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，则会继续以"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "协议文本"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "的方式"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "追加到新 AOF 文件的末尾"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，即已有的 RDB 数据的后面。"
				}
			]
		},
		{
			"ID": "20210708004525-i2c5bhh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-i2c5bhh"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "换句话说，在开启了 RDB-AOF 混合持久化功能之后，服务器生成的 AOF 文件将由两个部分组成，其中位于 AOF 文件"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "开头的是 RDB 格式的数据"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，而"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "跟在 RDB 数据后面的则是 AOF 格式的数据"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，如图所示"
				}
			]
		},
		{
			"ID": "20210708004525-uwns1mv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-uwns1mv"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "\u003cimg src=\"../assets/image-20210324173958322.png\" alt=\"image-20210324173958322\" style=\"zoom:50%;\" /\u003e"
				}
			]
		},
		{
			"ID": "20210708004525-apt00fq",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-apt00fq"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "同时使用 RDB 和 AOF—4.0 前 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-fulnq0v",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-fulnq0v"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注意以下问题即可："
				}
			]
		},
		{
			"ID": "20210708004525-i79zxr9",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-i79zxr9"
			},
			"Children": [
				{
					"ID": "20210708004525-689jcy3",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-689jcy3"
					},
					"Children": [
						{
							"ID": "20210708004525-qr20vtk",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-qr20vtk"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "同时使用两种持久化功能需要耗费大量系统资源，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "系统的硬件必须能够支撑"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "运行这两种功能所需的资源消耗，否则会给系统性能带来影响。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-x1lhou0",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-x1lhou0"
					},
					"Children": [
						{
							"ID": "20210708004525-k836irb",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-k836irb"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "🔥Redis 服务器在启动时，会"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "优先使用 AOF 文件进行数据恢复"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "只有在没有检测到 AOF 文件"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "时，"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "才会考虑"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "寻找并使用 RDB 文件进行数据恢复。"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "要是 2 个都有，则会只使用 AOF"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "！！！在企业级数据恢复中有踩坑！"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-memnkoj",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-memnkoj"
					},
					"Children": [
						{
							"ID": "20210708004525-lydv6gu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-lydv6gu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "当 Redis 服务器正在后台生成新的 RDB 文件时，如果有用户向服务器发送 BGREWRITEAOF 命令，或者配置选项中设置的 AOF 重写条件被满足了，那么服务器将把 AOF 重写操作推延到 RDB 文件创建完毕之后再执行，以此来避免两种持久化操作同时执行并争抢系统资源。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-jpos4bu",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-jpos4bu"
					},
					"Children": [
						{
							"ID": "20210708004525-phgopla",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-phgopla"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "同样，当服务器正在执行 BGREWRITEAOF 命令时，用户发送或者被触发的 BGSAVE 命令也会推延到 BGREWRITEAOF 命令执行完毕之后再执行。"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-edscyax",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-edscyax"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "RDB 与 AOF 区别与选择（旧）"
				}
			]
		},
		{
			"ID": "20210708004525-o3pjhbw",
			"Type": "NodeTable",
			"Data": "| 持久化方式   | RDB                    | AOF                         |\n| ------------ | ---------------------- | --------------------------- |\n| 占用存储空间 | 小（数据级：压缩）     | 大（指令级：重写）          |\n| 存储速度     | 慢（数据量大时非常慢） | 快                          |\n| 恢复速度     | 快（直接复制）         | 慢（执行指令）              |\n| 数据安全性   | 会丢失数据             | 依据策略决定                |\n| 资源消耗     | 高/重量级（文件大）    | 低/轻量级（文件小）         |\n| 启动优先级   | 低                     | **高**                      |\n|              | bgsave 时可能短暂阻塞  | bgrewriteaof 时可能短暂阻塞 |",
			"TableAligns": [
				0,
				0,
				0
			],
			"Properties": {
				"id": "20210708004525-o3pjhbw"
			},
			"Children": [
				{
					"Type": "NodeTableHead",
					"Children": [
						{
							"Type": "NodeTableRow",
							"Children": [
								{
									"Type": "NodeTableCell",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "持久化方式"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "RDB"
										}
									]
								},
								{
									"Type": "NodeTableCell",
									"Children": [
										{
											"Type": "NodeText",
											"Data": "AOF"
										}
									]
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "占用存储空间"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "小（数据级：压缩）"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "大（指令级：重写）"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "存储速度"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "慢（数据量大时非常慢）"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "快"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "恢复速度"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "快（直接复制）"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "慢（执行指令）"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "数据安全性"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "会丢失数据"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "依据策略决定"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "资源消耗"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "高/重量级（文件大）"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "低/轻量级（文件小）"
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "启动优先级"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "低"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "高"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						}
					]
				},
				{
					"Type": "NodeTableRow",
					"TableAligns": [
						0,
						0,
						0
					],
					"Children": [
						{
							"Type": "NodeTableCell"
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "bgsave 时可能短暂阻塞"
								}
							]
						},
						{
							"Type": "NodeTableCell",
							"Children": [
								{
									"Type": "NodeText",
									"Data": "bgrewriteaof 时可能短暂阻塞"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-mzswtuo",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-mzswtuo"
			},
			"Children": [
				{
					"ID": "20210708004525-a437sk0",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-a437sk0"
					},
					"Children": [
						{
							"ID": "20210708004525-vcdg41y",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-vcdg41y"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "对"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据非常敏感"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，建议使用默认的"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "AOF"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "持久化方案"
								}
							]
						},
						{
							"ID": "20210708004525-0cqwkwh",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-0cqwkwh"
							},
							"Children": [
								{
									"ID": "20210708004525-72wye18",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-72wye18"
									},
									"Children": [
										{
											"ID": "20210708004525-yj3mvk8",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-yj3mvk8"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "AOF 持久化策略使用 everysecond，每秒钟 fsync 一次。该策略 redis 仍可以保持很好的处理性能，当出现问题时，最多丢失 0-1 秒内的数据。"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-4u0i78v",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-4u0i78v"
									},
									"Children": [
										{
											"ID": "20210708004525-vf257t0",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-vf257t0"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "注意：由于 AOF 文件存储体积较大，且恢复速度较慢"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-4c4enjb",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-4c4enjb"
					},
					"Children": [
						{
							"ID": "20210708004525-lwnnuj9",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-lwnnuj9"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "数据呈现阶段有效性"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，建议使用 "
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "RDB"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 持久化方案"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-0xykzk5",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-0xykzk5"
					},
					"Children": [
						{
							"ID": "20210708004525-196chm5",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-196chm5"
							},
							"Children": [
								{
									"ID": "20210708004525-o3wc0uc",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-o3wc0uc"
									},
									"Children": [
										{
											"ID": "20210708004525-c2iyssr",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-c2iyssr"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "数据可以良好的做到阶段内无丢失（该阶段是开发者或运维人员手工维护的），且恢复速度较快，阶段点数据恢复通常采用 RDB 方案"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-0a0dsz0",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-0a0dsz0"
									},
									"Children": [
										{
											"ID": "20210708004525-wwwymzo",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-wwwymzo"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "注意：利用 RDB 实现紧凑的数据持久化会使 Redis 降的很低，慎重"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-gva38nh",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-gva38nh"
					},
					"Children": [
						{
							"ID": "20210708004525-odtadtv",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-odtadtv"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "综合比对："
								}
							]
						},
						{
							"ID": "20210708004525-rg2ceh0",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-rg2ceh0"
							},
							"Children": [
								{
									"ID": "20210708004525-n5ww546",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-n5ww546"
									},
									"Children": [
										{
											"ID": "20210708004525-k7bsg81",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-k7bsg81"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "RDB 与 AOF 的选择实际上是在做一种权衡，每种都有利有弊"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-uccfp4d",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-uccfp4d"
									},
									"Children": [
										{
											"ID": "20210708004525-si4tyez",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-si4tyez"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "如不能承受数分钟以内的数据丢失，对业务数据非常敏感，选用 AOF"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-mqmmbad",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-mqmmbad"
									},
									"Children": [
										{
											"ID": "20210708004525-29jogh0",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-29jogh0"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "如能承受数分钟以内的数据丢失，且追求大数据集的恢复速度，选用 RDB"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-j6y4l4l",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-j6y4l4l"
									},
									"Children": [
										{
											"ID": "20210708004525-2s6rqfv",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-2s6rqfv"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "灾难恢复选用 RDB"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-eo2k8as",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-eo2k8as"
									},
									"Children": [
										{
											"ID": "20210708004525-tw9ssxe",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-tw9ssxe"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "双保险策略，同时开启 RDB 和 AOF，重启后，Redis 优先使用 AOF 来恢复数据，降低丢失数据的量"
												}
											]
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-4mzq7mg",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-4mzq7mg"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "无持久化"
				}
			]
		},
		{
			"ID": "20210708004525-7npwf3f",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-7npwf3f"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "save \"\"\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-8sfuu5f",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-8sfuu5f"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "持久化应用场景"
				}
			]
		},
		{
			"ID": "20210708004525-n9u897y",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-n9u897y"
			},
			"Children": [
				{
					"ID": "20210708004525-lp0gnki",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-lp0gnki"
					},
					"Children": [
						{
							"ID": "20210708004525-99wbora",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-99wbora"
							},
							"Children": [
								{
									"Type": "NodeStrikethrough",
									"Children": [
										{
											"Type": "NodeStrikethrough2OpenMarker",
											"Data": "~~"
										},
										{
											"Type": "NodeText",
											"Data": "Tips 1:redis 用于控制数据库表主键 id，为数据库表主键提供生成策略，保障数据库表的主键唯一性"
										},
										{
											"Type": "NodeStrikethrough2CloseMarker",
											"Data": "~~"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。数据库读最大值+1"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-rwm2uni",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-rwm2uni"
					},
					"Children": [
						{
							"ID": "20210708004525-qimvue5",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-qimvue5"
							},
							"Children": [
								{
									"Type": "NodeStrikethrough",
									"Children": [
										{
											"Type": "NodeStrikethrough2OpenMarker",
											"Data": "~~"
										},
										{
											"Type": "NodeText",
											"Data": "Tips 3:redis 应用于各种结构型和非结构型高热度数据访问加速"
										},
										{
											"Type": "NodeStrikethrough2CloseMarker",
											"Data": "~~"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。数据库也存了"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-lbppwzb",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-lbppwzb"
					},
					"Children": [
						{
							"ID": "20210708004525-mno0ugp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-mno0ugp"
							},
							"Children": [
								{
									"Type": "NodeStrikethrough",
									"Children": [
										{
											"Type": "NodeStrikethrough2OpenMarker",
											"Data": "~~"
										},
										{
											"Type": "NodeText",
											"Data": "Tips 4:redis 应用于购物车数据存储设计"
										},
										{
											"Type": "NodeStrikethrough2CloseMarker",
											"Data": "~~"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。数据库也存了"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-283pdlw",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-283pdlw"
					},
					"Children": [
						{
							"ID": "20210708004525-ueyebpq",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ueyebpq"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Tips 5:redis 应用于抢购，限购类、限量发放优惠卷、激活码等业务的数据存储设计"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-pwbs9tl",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-pwbs9tl"
					},
					"Children": [
						{
							"ID": "20210708004525-15ku3x6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-15ku3x6"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Tips 6:redis 应用于具有操作先后顺序的数据控制"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-avkdj3t",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-avkdj3t"
					},
					"Children": [
						{
							"ID": "20210708004525-i1gkhao",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-i1gkhao"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Tips 7:redis 应用于最新消息展示"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-ojf05bl",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-ojf05bl"
					},
					"Children": [
						{
							"ID": "20210708004525-hibhkxx",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-hibhkxx"
							},
							"Children": [
								{
									"Type": "NodeStrikethrough",
									"Children": [
										{
											"Type": "NodeStrikethrough2OpenMarker",
											"Data": "~~"
										},
										{
											"Type": "NodeText",
											"Data": "Tips 9:redis 应用于同类信息的关联搜索，二度关联搜索，深度关联搜索"
										},
										{
											"Type": "NodeStrikethrough2CloseMarker",
											"Data": "~~"
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-3xl5f9x",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-3xl5f9x"
					},
					"Children": [
						{
							"ID": "20210708004525-939t9jd",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-939t9jd"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Tips 12:redis 应用于基于黑名单（数据库不一定有）与白名单（数据库肯定有）设定的服务控制"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-33rst0l",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-33rst0l"
					},
					"Children": [
						{
							"ID": "20210708004525-bbqy37x",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-bbqy37x"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "Tips 13:redis 应用于计数器组合排序功能对应的排名"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-y2agzz4",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-y2agzz4"
					},
					"Children": [
						{
							"ID": "20210708004525-z51irub",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-z51irub"
							},
							"Children": [
								{
									"Type": "NodeStrikethrough",
									"Children": [
										{
											"Type": "NodeStrikethrough2OpenMarker",
											"Data": "~~"
										},
										{
											"Type": "NodeText",
											"Data": "Tips 15:redis 应用于即时任务/消息队列执行管理"
										},
										{
											"Type": "NodeStrikethrough2CloseMarker",
											"Data": "~~"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "。MQ"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-qwz40j6",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-qwz40j6"
					},
					"Children": [
						{
							"ID": "20210708004525-6j3t97k",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-6j3t97k"
							},
							"Children": [
								{
									"Type": "NodeStrikethrough",
									"Children": [
										{
											"Type": "NodeStrikethrough2OpenMarker",
											"Data": "~~"
										},
										{
											"Type": "NodeText",
											"Data": "Tips 16:redis 应用于按次结算的服务控制"
										},
										{
											"Type": "NodeStrikethrough2CloseMarker",
											"Data": "~~"
										}
									]
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-50l3uaj",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-50l3uaj"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "不同"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "库"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "（不是那 16 个 db）里不同持久化方式！"
				}
			]
		},
		{
			"ID": "20210708004525-xwk8egb",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-xwk8egb"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "SHUTDOWN"
				}
			]
		},
		{
			"ID": "20210708004525-0gl3zkx",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-0gl3zkx"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "用户可以通过执行 SHUTDOWN 命令来关闭 Redis 服务器"
				}
			]
		},
		{
			"ID": "20210708004525-w6mej3y",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-w6mej3y"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "SHUTDOWN\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-grkdsk4",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-grkdsk4"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "在默认情况下，当 Redis 服务器接收到 SHUTDOWN 命令时，它将执行以下动作："
				}
			]
		},
		{
			"ID": "20210708004525-2h4bnk9",
			"Type": "NodeList",
			"ListData": {
				"Typ": 1,
				"Start": 1,
				"Delimiter": 46,
				"Padding": 3,
				"Marker": "MQ==",
				"Num": 1
			},
			"Properties": {
				"id": "20210708004525-2h4bnk9"
			},
			"Children": [
				{
					"ID": "20210708004525-yybprpb",
					"Type": "NodeListItem",
					"Data": "1",
					"ListData": {
						"Typ": 1,
						"Start": 1,
						"Delimiter": 46,
						"Padding": 3,
						"Marker": "MQ==",
						"Num": 1
					},
					"Properties": {
						"id": "20210708004525-yybprpb"
					},
					"Children": [
						{
							"ID": "20210708004525-0l3wz6n",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-0l3wz6n"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "停止处理客户端发送的命令请求。"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-1uy5d1x",
					"Type": "NodeListItem",
					"Data": "2",
					"ListData": {
						"Typ": 1,
						"Tight": true,
						"Start": 2,
						"Delimiter": 46,
						"Padding": 3,
						"Marker": "Mg==",
						"Num": 2
					},
					"Properties": {
						"id": "20210708004525-1uy5d1x"
					},
					"Children": [
						{
							"ID": "20210708004525-ce581t7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-ce581t7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "根据服务器的持久化配置选项，决定是否执行数据保存操作："
								}
							]
						},
						{
							"ID": "20210708004525-s2y8y3b",
							"Type": "NodeList",
							"ListData": {
								"Tight": true,
								"BulletChar": 45,
								"Padding": 2,
								"Marker": "LQ==",
								"Num": -1
							},
							"Properties": {
								"id": "20210708004525-s2y8y3b"
							},
							"Children": [
								{
									"ID": "20210708004525-ozxl5am",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-ozxl5am"
									},
									"Children": [
										{
											"ID": "20210708004525-dunmzsw",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-dunmzsw"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "如果服务器启用了 RDB 持久化功能，并且数据库距离最后一次成功创建 RDB 文件之后已经发生了改变，那么服务器将执行 SAVE 命令，创建一个新的 RDB 文件。"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-y087psy",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-y087psy"
									},
									"Children": [
										{
											"ID": "20210708004525-sex1lkf",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-sex1lkf"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "如果服务器启用了 AOF 持久化功能或者 RDB-AOF 混合持久化功能，那么它将冲洗 AOF 文件，确保所有已执行的命令都被记录到了 AOF 文件中。"
												}
											]
										}
									]
								},
								{
									"ID": "20210708004525-vhd5icv",
									"Type": "NodeListItem",
									"Data": "-",
									"ListData": {
										"Tight": true,
										"BulletChar": 45,
										"Padding": 2,
										"Marker": "LQ==",
										"Num": -1
									},
									"Properties": {
										"id": "20210708004525-vhd5icv"
									},
									"Children": [
										{
											"ID": "20210708004525-o62r2f6",
											"Type": "NodeParagraph",
											"Properties": {
												"id": "20210708004525-o62r2f6"
											},
											"Children": [
												{
													"Type": "NodeText",
													"Data": "如果服务器既没有启用 RDB 持久化功能，也没有启用 AOF 持久化功能，那么服务器将略过这一步。"
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-o4onnzv",
					"Type": "NodeListItem",
					"Data": "3",
					"ListData": {
						"Typ": 1,
						"Tight": true,
						"Start": 3,
						"Delimiter": 46,
						"Padding": 3,
						"Marker": "Mw==",
						"Num": 3
					},
					"Properties": {
						"id": "20210708004525-o4onnzv"
					},
					"Children": [
						{
							"ID": "20210708004525-nr70f5v",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-nr70f5v"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "服务器进程退出"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-ixsx3b0",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-ixsx3b0"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "因为 Redis 服务器在接收到 SHUTDOWN 命令并关闭自身的过程中，会根据配置选项来决定是否执行数据保存操作，所以只要服务器"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "启用了持久化功能"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "，那么"
				},
				{
					"Type": "NodeStrong",
					"Children": [
						{
							"Type": "NodeStrongA6kOpenMarker",
							"Data": "**"
						},
						{
							"Type": "NodeText",
							"Data": "使用 SHUTDOWN 命令来关闭服务器就不会造成任何数据丢失"
						},
						{
							"Type": "NodeStrongA6kCloseMarker",
							"Data": "**"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-58cndzr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-58cndzr"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "使用 SHUTDOWN 命令提供的"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "save"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "选项或者"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "nosave"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "选项，显式地指示服务器在关闭之前是否需要执行持久化操作："
				}
			]
		},
		{
			"ID": "20210708004525-f049iim",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-f049iim"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "SHUTDOWN [save|nosave]\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-s0d0dpq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-s0d0dpq"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果用户给定的是 save 选项，那么无论服务器是否启用了持久化功能，服务器都会在关闭之前执行一次持久化操作。下图展示了服务器在不同持久化配置下，执行 SHUTDOWN save 命令时的行为"
				}
			]
		},
		{
			"ID": "20210708004525-pqnbbwr",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-pqnbbwr"
			},
			"Children": [
				{
					"Type": "NodeImage",
					"Children": [
						{
							"Type": "NodeBang",
							"Data": "!"
						},
						{
							"Type": "NodeOpenBracket",
							"Data": "["
						},
						{
							"Type": "NodeLinkText",
							"Data": "image-20210324181416803"
						},
						{
							"Type": "NodeCloseBracket",
							"Data": "]"
						},
						{
							"Type": "NodeOpenParen",
							"Data": "("
						},
						{
							"Type": "NodeLinkDest",
							"Data": "../assets/image-20210324181416803.png"
						},
						{
							"Type": "NodeCloseParen",
							"Data": ")"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-zko3s9m",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-zko3s9m"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "如果用户给定的是 nosave 选项，那么服务器将不执行持久化操作，直接关闭服务器。会丢失尚未保存的数据"
				}
			]
		},
		{
			"ID": "20210708004525-940m0og",
			"Type": "NodeHeading",
			"HeadingLevel": 2,
			"Properties": {
				"id": "20210708004525-940m0og"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "## "
				},
				{
					"Type": "NodeText",
					"Data": "企业级数据备份方案 \u0026 数据恢复容灾演练 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-1max459",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-1max459"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "持久化的配置策略 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-gu5qyvq",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-gu5qyvq"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "RDB 配置默认为"
				}
			]
		},
		{
			"ID": "20210708004525-lt04di7",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-lt04di7"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "save 60 10000\nsave 300 100\nsave 3600 1\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-nwtaaia",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-nwtaaia"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "无需改变。如果你希望尽可能确保说，RDB 最多丢 1 分钟的数据，那么尽量就是每隔 1 分钟都生成一个快照，低峰期或数据量很少时也没必要"
				}
			]
		},
		{
			"ID": "20210708004525-mhfnjfs",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-mhfnjfs"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "开启 AOF，并配置（默认）"
				}
			]
		},
		{
			"ID": "20210708004525-ukpxz7i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-ukpxz7i"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "appendfsync everysec # 不用改！\nauto-aof-rewrite-percentage 100 # 根据实际业务情况修改\nauto-aof-rewrite-min-size 64mb # 根据实际业务情况修改\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-wpg9i5v",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-wpg9i5v"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "数据冷备份方案 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-llj37xh",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-llj37xh"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "RDB 非常适合做冷备，每次生成之后，就不会再有修改了。具体方案："
				}
			]
		},
		{
			"ID": "20210708004525-efhjkyw",
			"Type": "NodeList",
			"ListData": {
				"Tight": true,
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-efhjkyw"
			},
			"Children": [
				{
					"ID": "20210708004525-phtavbl",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-phtavbl"
					},
					"Children": [
						{
							"ID": "20210708004525-e5fgjie",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-e5fgjie"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "写 "
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "crontab"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": " 定时调度脚本去做数据备份"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-1rdbfz7",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-1rdbfz7"
					},
					"Children": [
						{
							"ID": "20210708004525-hcdrrrc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-hcdrrrc"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "每小时"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "都 copy 一份 rdb 的备份，到一个目录中去，仅仅保留"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "最近 48 小时"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的备份"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-86hjgiy",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-86hjgiy"
					},
					"Children": [
						{
							"ID": "20210708004525-poinfli",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-poinfli"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "每天都"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "保留一份当日的 rdb 的备份，到一个目录中去，仅仅保留"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "最近 1 个月"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "的备份"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-rpm94pe",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-rpm94pe"
					},
					"Children": [
						{
							"ID": "20210708004525-2cu8ks7",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-2cu8ks7"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "每次 copy 备份的时候，都把太旧的备份给删了"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-83ocfa4",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-83ocfa4"
					},
					"Children": [
						{
							"ID": "20210708004525-b4t3dbp",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-b4t3dbp"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "每天晚上将当前服务器上所有的数据备份，发送一份到远程的云服务上去"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-7b4c31e",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-7b4c31e"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "每小时的脚本文件"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "redis_rdb_copy_hourly.sh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-bese5ig",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "c2g=",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-bese5ig"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "c2g="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "#!/bin/sh\n\ncur_date=`date +%Y%m%d%k`\nrm -rf /usr/local/redis/snapshotting/$cur_date\nmkdir /usr/local/redis/snapshotting/$cur_date\ncp /var/redis/6379/dump.rdb /usr/local/redis/snapshotting/$cur_date\n\ndel_date=`date -d -48hour +%Y%m%d%k`\nrm -rf /usr/local/redis/snapshotting/$del_date\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-ws5hlc9",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-ws5hlc9"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "写"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "crontab"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "定时器"
				}
			]
		},
		{
			"ID": "20210708004525-a0eq2hq",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-a0eq2hq"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ubuntu@VM-0-3-ubuntu:~$ crontab -e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-scp12ea",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-scp12ea"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编辑内容如下"
				}
			]
		},
		{
			"ID": "20210708004525-nnczetd",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-nnczetd"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "0 * * * * sh /usr/local/redis/copy/redis_rdb_copy_hourly.sh\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-665s3qv",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-665s3qv"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注：第 1 位代表分钟！"
				}
			]
		},
		{
			"ID": "20210708004525-b197yz5",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-b197yz5"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "每天的脚本文件"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "redis_rdb_copy_daily.sh"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-5dpqnsl",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockInfo": "c2g=",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-5dpqnsl"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker",
					"CodeBlockInfo": "c2g="
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "#!/bin/sh\n\ncur_date=`date +%Y%m%d`\nrm -rf /usr/local/redis/snapshotting/$cur_date\nmkdir /usr/local/redis/snapshotting/$cur_date\ncp /var/redis/6379/dump.rdb /usr/local/redis/snapshotting/$cur_date\n\ndel_date=`date -d -1month +%Y%m%d`\nrm -rf /usr/local/redis/snapshotting/$del_date\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-3xboz4x",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-3xboz4x"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "写"
				},
				{
					"Type": "NodeCodeSpan",
					"CodeMarkerLen": 1,
					"Children": [
						{
							"Type": "NodeCodeSpanOpenMarker",
							"Data": "`"
						},
						{
							"Type": "NodeCodeSpanContent",
							"Data": "crontab"
						},
						{
							"Type": "NodeCodeSpanCloseMarker",
							"Data": "`"
						}
					]
				},
				{
					"Type": "NodeText",
					"Data": "定时器"
				}
			]
		},
		{
			"ID": "20210708004525-cb1cy8i",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-cb1cy8i"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "ubuntu@VM-0-3-ubuntu:~$ crontab -e\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-jh4jn6q",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-jh4jn6q"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "编辑内容如下"
				}
			]
		},
		{
			"ID": "20210708004525-qdw1ntn",
			"Type": "NodeCodeBlock",
			"IsFencedCodeBlock": true,
			"CodeBlockFenceChar": 96,
			"CodeBlockFenceLen": 3,
			"CodeBlockOpenFence": "YGBg",
			"CodeBlockCloseFence": "YGBg",
			"Properties": {
				"id": "20210708004525-qdw1ntn"
			},
			"Children": [
				{
					"Type": "NodeCodeBlockFenceOpenMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				},
				{
					"Type": "NodeCodeBlockFenceInfoMarker"
				},
				{
					"Type": "NodeCodeBlockCode",
					"Data": "0 0 * * * sh /usr/local/redis/copy/redis_rdb_copy_daily.sh\n"
				},
				{
					"Type": "NodeCodeBlockFenceCloseMarker",
					"Data": "```",
					"CodeBlockFenceLen": 3
				}
			]
		},
		{
			"ID": "20210708004525-rtpev8b",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-rtpev8b"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "注：第 1 位代表分钟！第 2 位代表小时！"
				}
			]
		},
		{
			"ID": "20210708004525-pnjck0a",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-pnjck0a"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "数据恢复方案—RDB 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-sk1jk0x",
			"Type": "NodeList",
			"ListData": {
				"BulletChar": 45,
				"Padding": 2,
				"Marker": "LQ==",
				"Num": -1
			},
			"Properties": {
				"id": "20210708004525-sk1jk0x"
			},
			"Children": [
				{
					"ID": "20210708004525-wvjzz4k",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-wvjzz4k"
					},
					"Children": [
						{
							"ID": "20210708004525-wwoqc65",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-wwoqc65"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果是 redis 进程挂掉，那么重启 redis 进程即可，直接基于 AOF 日志文件恢复数据"
								}
							]
						},
						{
							"ID": "20210708004525-w3fixwz",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-w3fixwz"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "最多丢 1 秒数据"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-4vzp0b0",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-4vzp0b0"
					},
					"Children": [
						{
							"ID": "20210708004525-1yo3nrn",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-1yo3nrn"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果是 redis 进程挂掉，那么重启 redis 进程即可，直接基于 AOF 日志文件恢复数据"
								}
							]
						},
						{
							"ID": "20210708004525-r2ret4a",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-r2ret4a"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "AOF 没有破损，也是可以直接基于 AOF 恢复的。如果 AOF 文件破损，那么用"
								},
								{
									"Type": "NodeCodeSpan",
									"CodeMarkerLen": 1,
									"Children": [
										{
											"Type": "NodeCodeSpanOpenMarker",
											"Data": "`"
										},
										{
											"Type": "NodeCodeSpanContent",
											"Data": "redis-check-aof fix"
										},
										{
											"Type": "NodeCodeSpanCloseMarker",
											"Data": "`"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "修复"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-27fvo9g",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-27fvo9g"
					},
					"Children": [
						{
							"ID": "20210708004525-e389mcg",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-e389mcg"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果 redis 当前"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "最新的 AOF 和 RDB 文件出现了丢失/损坏"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "，那么可以尝试基于该机器上当前的某个"
								},
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "最新的 RDB 数据副本"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "进行数据恢复"
								}
							]
						},
						{
							"ID": "20210708004525-8pk102w",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-8pk102w"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "这种情况一般不是机器问题，是人为的。大数据系统，hadoop，有人不小心就把 hadoop 中存储的大量的数据文件对应的目录，rm -rf 一下。小公司，运维不太靠谱，权限也弄的不太好，把 /var/redis/6379 下的文件给删除了"
								}
							]
						},
						{
							"ID": "20210708004525-8c7wqxu",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-8c7wqxu"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "找到 RDB 最新的一份备份，小时级的即可，copy 到 redis 里面去，就可以恢复到某一个小时的数据。"
								}
							]
						},
						{
							"ID": "20210708004525-iqibx0o",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-iqibx0o"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "但是但是但是！注意："
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								},
								{
									"Type": "NodeText",
									"Data": "AOF 和 RDB 会优先使用 AOF，只有没有 AOF 文件时才会使用 RDB。"
								}
							]
						},
						{
							"ID": "20210708004525-67b87d6",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-67b87d6"
							},
							"Children": [
								{
									"Type": "NodeStrong",
									"Children": [
										{
											"Type": "NodeStrongA6kOpenMarker",
											"Data": "**"
										},
										{
											"Type": "NodeText",
											"Data": "所以需要停止 Redis，关闭配置文件中的 AOF，拷贝 RDB 备份，重启 Redis 确认数据恢复，然后在命令行中打开 AOF（首次执行命令会也是为了阻塞生成 dump 文件，方便后续追加，建议在低峰期操作）。此时可以停止 Redis，修改配置文件中 AOF 为 yes，重启 Redis，彻底解决！"
										},
										{
											"Type": "NodeStrongA6kCloseMarker",
											"Data": "**"
										}
									]
								}
							]
						},
						{
							"ID": "20210708004525-uywo2rv",
							"Type": "NodeCodeBlock",
							"IsFencedCodeBlock": true,
							"CodeBlockFenceChar": 96,
							"CodeBlockFenceLen": 3,
							"CodeBlockOpenFence": "YGBg",
							"CodeBlockCloseFence": "YGBg",
							"Properties": {
								"id": "20210708004525-uywo2rv"
							},
							"Children": [
								{
									"Type": "NodeCodeBlockFenceOpenMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								},
								{
									"Type": "NodeCodeBlockFenceInfoMarker"
								},
								{
									"Type": "NodeCodeBlockCode",
									"Data": "CONFIG SET appendonly yes\n"
								},
								{
									"Type": "NodeCodeBlockFenceCloseMarker",
									"Data": "```",
									"CodeBlockFenceLen": 3
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-kd2fsgu",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-kd2fsgu"
					},
					"Children": [
						{
							"ID": "20210708004525-pqj9omc",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-pqj9omc"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果当前机器上的所有 RDB 文件全部损坏，那么从远程的云服务上拉取最新的 RDB 快照回来恢复数据"
								}
							]
						}
					]
				},
				{
					"ID": "20210708004525-g6ix0jw",
					"Type": "NodeListItem",
					"Data": "-",
					"ListData": {
						"Tight": true,
						"BulletChar": 45,
						"Padding": 2,
						"Marker": "LQ==",
						"Num": -1
					},
					"Properties": {
						"id": "20210708004525-g6ix0jw"
					},
					"Children": [
						{
							"ID": "20210708004525-enlucpm",
							"Type": "NodeParagraph",
							"Properties": {
								"id": "20210708004525-enlucpm"
							},
							"Children": [
								{
									"Type": "NodeText",
									"Data": "如果是发现有重大的数据错误，比如某个小时上线的程序一下子将数据全部污染了，数据全错了，那么可以选择某个更早的时间点，对数据进行恢复"
								}
							]
						}
					]
				}
			]
		},
		{
			"ID": "20210708004525-ke0m6k2",
			"Type": "NodeHeading",
			"HeadingLevel": 3,
			"Properties": {
				"id": "20210708004525-ke0m6k2"
			},
			"Children": [
				{
					"Type": "NodeHeadingC8hMarker",
					"Data": "### "
				},
				{
					"Type": "NodeText",
					"Data": "数据恢复方案—4.0 后 🔥"
				}
			]
		},
		{
			"ID": "20210708004525-v5e6hie",
			"Type": "NodeParagraph",
			"Properties": {
				"id": "20210708004525-v5e6hie"
			},
			"Children": [
				{
					"Type": "NodeText",
					"Data": "可以利用上面思路，使用 RDB-AOF 混合持久化（最终还是 AOF 文件）来进行备份以及数据恢复！"
				}
			]
		}
	]
}